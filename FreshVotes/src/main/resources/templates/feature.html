<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
<script th:replace="fragments/header :: headerElement">
	
</script>
<title>FreshVotesProduct</title>
</head>
<body>
	<div th:replace="fragments/header :: navbar"></div>
	<div class="container" style="margin-top: 2em">

				<div class="row">
					<div class="col-12 col-md-8">
						<h3>New Feature </h3>
					</div>
					<div class="col-12 col-md-4">
						<span style="font-size: 1.3em" class="bagde badge-secondary " th:text="${feature.status}"></span>
					</div>
					
				</div>
				
				<form action="" method="post">
					<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" /> 
						<input type="hidden" th:field="${feature.id}" /> 
						<input type="hidden" th:field="${feature.product}" /> 
						<input type="hidden" th:field="${feature.status}" />
					
					<div class="form-group row">
						<label for="title" class="col-12 col-sm-3 col-form-label">Title:</label>
						<input type="text" th:field="${feature.title}" th:attrappend="disabled= ${feature.user.id==user.id} ? null : 'disabled'" class="form-control"/>	
					</div>
					
					<div class="form-group row">
						<label for="description" class="col-12 col-sm-3 col-form-label">Description:</label>
						<textarea th:field="${feature.description}" th:attrappend="disabled= ${feature.user.id==user.id} ? null : 'disabled'" class="form-control">
						</textarea>
					</div>

					<button type="submit" class="btn btn-primary btn-lg" th:if="${feature.user.id == user.id}">Save Feature</button>
					
				</form>
				
				<div style = "margin-top: 2em">
					<h2>Comments</h2>
					<form action="" >
						<div class="form-group" style="margin-top: 2em">
						<label for="exampleTextarea1">Leave a cooment below:</label>
						<textarea class="form-control" id="exampleTextarea1" rows="3"></textarea>
					</div>
					</form>
					
				<div th:each="comment : ${comments}">
						<span th:if="${comment.comment == null}" th:text="${comment.text}"></span>
						<div th:each="commentLevel1 : ${comment.comments}" style="margin-left: 2em;">
							<span th:text="${commentLevel1.text}"></span>
							<div th:each="commentLevel2 : ${commentLevel1.comments}" style="margin-left: 2em;">
							<span th:if="${commentLevel1.comments != null}" th:text="${commentLevel2.text}"></span>
							</div>
						
				</div>
				</div>
		</div>
			
	</div>

</body>
</html>